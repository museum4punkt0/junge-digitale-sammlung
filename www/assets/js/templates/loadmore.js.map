{"version":3,"names":["element","document","querySelector","button","limit","parseInt","getAttribute","offset","addEventListener","async","url","window","location","href","split","urlwithtag","firstpart","secondpart","console","log","replace","response","fetch","html","more","json","hidden","innerHTML","error"],"sources":["../../../../src/js/templates/loadmore.js"],"sourcesContent":["const element = document.querySelector('.load-more-container');\nconst button  = document.querySelector('.load-more-btn');\nconst limit   = parseInt(element.getAttribute('data-limit'));\nlet offset    = limit;\n\n/**\n * Fetches loadmore items via ajax call and json response\n */\nconst fetchPages = async () => {\n  let url = `${window.location.href.split('?')[0]}`; \n  let urlwithtag = url.split('/tag:');\n  let firstpart = urlwithtag[0];\n  let secondpart = urlwithtag[1];\n  console.log(firstpart);\n  firstpart = removeChar(firstpart);\n  url = `${firstpart}.json/tag:${secondpart}?offset=${offset}`;\n  console.log(url);\n  try {\n    const response       = await fetch(url);\n    const { html, more } = await response.json();\n    button.hidden        = !more;\n    element.innerHTML    += html;\n    offset               += limit;\n  } catch (error) {\n    console.log('Fetch error: ', error);\n  }\n}\n\n/**\n * Removes unwanted characters in case of kirby tags in URL (please refer to kirby tags)\n * @param {string} str \n * @returns {string}\n */\nfunction removeChar(str) {\n  var s = str.replace(/\\/$/, '');\n  return s;\n}\n\nbutton.addEventListener('click', fetchPages);\n"],"mappings":"2FAAA,MAAMA,EAAUC,SAASC,cAAc,wBACjCC,EAAUF,SAASC,cAAc,kBACjCE,EAAUC,SAASL,EAAQM,aAAa,eAC9C,IAAIC,EAAYH,EAmChBD,EAAOK,iBAAiB,SA9BLC,UACjB,IAAIC,EAAM,GAAGC,OAAOC,SAASC,KAAKC,MAAM,KAAK,KACzCC,EAAaL,EAAII,MAAM,SACvBE,EAAYD,EAAW,GACvBE,EAAaF,EAAW,GAC5BG,QAAQC,IAAIH,GACZA,EAAuBA,EAoBXI,QAAQ,MAAO,IAnB3BV,EAAM,GAAGM,cAAsBC,YAAqBV,IACpDW,QAAQC,IAAIT,GACZ,IACE,MAAMW,QAAuBC,MAAMZ,IAC7Ba,KAAEA,EAAIC,KAAEA,SAAeH,EAASI,OACtCtB,EAAOuB,QAAiBF,EACxBxB,EAAQ2B,WAAgBJ,EACxBhB,GAAwBH,CAC5B,CAAI,MAAOwB,GACPV,QAAQC,IAAI,gBAAiBS,EACjC,I"}